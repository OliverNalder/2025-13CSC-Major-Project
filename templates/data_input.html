<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Input</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="nav_menu">

    </div>
    <header>
        <div class="top-bar">
            <div class="hamburger" onclick="toggleSidebar()">
                &#9776;
            </div>
            <a href="https://wealthpoint.co.nz/"><img src="static/__LogoCMYK NOBLYINE (1).png" alt="Logo" class="logo" /></a>
        </div>
    </header>

    <div class="container">
        <nav id="sidebar">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/data-input">Data Input</a></li>
                <li class="dropdown">
                    <a href="#" onclick="toggleDropdown(this)">Reports</a>
                    <ul class="submenu">
                        <li><a href="/report">All Team</a></li>
                        <li class="dropdown">
                          <a href="#" onclick="toggleDropdown(this)">Individuals</a>
                          <ul class="submenu">
                              {% for member in team_members %}
                                <li><a href="/report/{{member}}">{{member}}</a></li>
                              {% endfor %}
                          </ul>
                        </li>
                        
                        <li><a href="/report_old">Previous Years</a></li>
                        
                    </ul>
                </li>
                <li><a href="/team_manager">Team Management</a></li>
                <li><a href="/signout">Sign Out</a></li>
            </ul>
        </nav>
        
  <main id="content">
            
        
    


    <form method="POST" action="/data-input-manual">
      <div class="input_table">
      <table border="1" cellspacing="0">
        <thead>
          <tr>
            {% for title in column_names %}
              <th>{{title}}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for stats_row in stats %}
            <tr>
              {% for stat in stats_row %}
                {% if stat == stats_row[0] %}
                  <td class="name">{{ stat }}</td>
                {% else: %}
                  <td><input name="stats" value="{{ stat }}" type="number"></td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
      <button type="submit">Save Data</button>
    </form>
    
    <form method="POST" enctype="multipart/form-data" action="/data-input">
        <input type="file" name="file" accept=".csv">
        <input type="submit" value="Upload CSV">{{ error_message }}
    </form>

    <form method="POST" id="teamForm">
        <select name="select" id="teamSelect">
            <option selected disabled hidden>Selected Team: {{ team }}</option>
            {% for t in user_teams %}
                <option value="{{ t }}">{{ t }}</option>
            {% endfor %}
        </select>
    </form>
    <a href='/download_csv'><button>Download CSV</button></a>
    
  </main>

<script>
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("open");
        }

        function toggleDropdown(el) {
            el.nextElementSibling.classList.toggle("open");
        }
      document.getElementById("teamSelect").addEventListener("change", function () {
        document.getElementById("teamForm").submit();
      });
</script>
</body>
</html>